<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Aromahut - Billing</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta content="" name="keywords" />
  <meta content="" name="description" />

  <!-- Google Web Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>

  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap" rel="stylesheet" />

  <!-- Icon Font Stylesheet -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Libraries Stylesheet -->
  <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet" />
  <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />

  <!-- Customized Bootstrap Stylesheet -->
  <link href="css/bootstrap.min.css" rel="stylesheet" />

  <!-- Template Stylesheet -->
  <link href="css/style.css" rel="stylesheet" />
<link rel="icon" href="/img/aromahutTitleIcon.png" type="image/png">

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

  <script defer src="https://checkout.razorpay.com/v1/checkout.js"></script>
  
  <style>
    :root {
      --primary-orange: #ff6b00;
      --dark-orange: #e05a00;
      --primary-blue:#1F75FE;
      --light-orange: #ff8c00;
      --gold-accent: #ffd700;
      --spice-gradient: linear-gradient(135deg, #ff6b00, #ff8c00, #ffaa00);
      --trust-gradient: linear-gradient(135deg, #1F75FE, #3C8DFF, #66A6FF);

      --light-gray: #f8f9fa;
      --medium-gray: #e9ecef;
      --dark-gray: #393b3c;
    }
  
 #custom-city-input {
  padding: 10px !important;
  border: 1px solid var(--primary-orange);
  border-radius: 14px;
  font-size: 16px;
  width: 100%;
  box-sizing: border-box;
  outline: none;
  transition: all 0.2s ease-in-out;
  background-color: #fff;
  color: #333;
}

#custom-city-input:focus,
#custom-city-input:active {
  border-color: #e65100; /* darker shade of primary orange */
  box-shadow: 0 0 0 3px rgba(255, 102, 0, 0.2); /* soft orange glow */
  background-color: #fffdf8;
  color: #000;
}

#custom-city-input::placeholder {
  color: #aaa;
  font-style: italic;
  transition: color 0.2s ease-in-out;
}

#custom-city-input:focus::placeholder {
  color: #ccc;
}


    /* Style the <select> closed box */
select.form-control {
    background-color: rgb(255, 255, 255) !important;
    border:1px solid #ff7e00;
    color: #575757;
    font-weight: 500;
    border-radius: 4px;
    padding: 8px 12px;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    position: relative;
    transition: box-shadow 0.3s ease, transform 0.2s ease;
    background-image: linear-gradient(45deg, transparent 50%, #ff7e00 50%),
                      linear-gradient(135deg, #ff7e00 50%, transparent 50%);
    background-position: calc(100% - 20px) calc(1em + 2px), calc(100% - 15px) calc(1em + 2px);
    background-size: 5px 5px, 5px 5px;
    background-repeat: no-repeat;
}

select.form-control:focus {
    outline: none;
    box-shadow: 0 0 5px rgba(255, 126, 0, 0.5);
    border-color: #ff7e00;
}

/* Default dropdown menu items */
select.form-control option {
    background-color: #fff;
    color: #333 !important;
}

/* Selected option in dropdown menu */
select.form-control option:checked,
select.form-control option:focus,
select.form-control option:hover {
    background: linear-gradient(90deg, #ff7e00, #ffae42) !important;
    color: #fff;
}




    
    /* Base Styles */
    body {
      font-family: 'Open Sans', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Raleway', sans-serif;
    }
    
    /* Checkout Container */
    .checkout-container {
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      margin: 20px auto;
      padding: 30px;
      position: relative;
      max-width: 1400px;
      top: -40px;
    }
    
    /* Form Styles */
    .form-label {
      font-weight: 600;
      color: var(--dark-gray);
    }
    
    .form-control {
      border: 1px solid var(--medium-gray);
      border-radius: 5px;
      padding: 10px 15px;
      transition: all 0.3s ease;
    }
    
    .form-control:focus {
      border-color: var(--primary-orange);
      box-shadow: 0 0 0 0.25rem rgba(255, 107, 0, 0.25);
    }
    
          /* Luxurious Orange Theme Scrollbar */
      ::-webkit-scrollbar {
          width: 12px;
          height: 12px;
      }
      
      ::-webkit-scrollbar-track {
          background: #fff5e6; /* Light orange background */
          border-radius: 10px;
          box-shadow: inset 0 0 5px rgba(255, 165, 0, 0.1);
      }
      
      ::-webkit-scrollbar-thumb {
          background: linear-gradient(135deg, #ff8c00, #ff6b00, #ff4500);
          border-radius: 10px;
          border: 2px solid #fff5e6;
          box-shadow: inset 0 0 3px rgba(255, 255, 255, 0.3);
          transition: all 0.3s ease;
      }
      
      ::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(135deg, #ff4500, #ff6b00, #ff8c00);
          box-shadow: inset 0 0 6px rgba(255, 255, 255, 0.4);
      }
      
      ::-webkit-scrollbar-corner {
          background: #fff5e6;
      }
      
      /* For Firefox */
      * {
          scrollbar-width: thin;
          scrollbar-color: #ff6b00 #fff5e6;
      }
      
      /* Smooth scrolling effect */
      html {
          scroll-behavior: smooth;
      }
      
      /* Scroll glow effect */
      .scrolling-glow {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(90deg, #ff8c00, #ff6b00, #ff4500);
          z-index: 9999;
          transform-origin: 0 0;
          transform: scaleX(0);
          transition: transform 0.2s ease-out;
          box-shadow: 0 0 10px rgba(255, 107, 0, 0.7);
      }

    /* Cart Summary */
    .cart-summary {
      background-color: var(--light-gray);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    .cart-summary h3 {
      color: var(--primary-orange);
      font-weight: 700;
      margin-bottom: 20px;
    }
    
    /* Table Styles */
    table.table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
    
    table.table thead tr {
      background: var(--spice-gradient);
      color: white;
    }
    
    table.table th {
      padding: 15px;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.85rem;
      letter-spacing: 0.5px;
    }
    
    table.table td {
      padding: 15px;
      vertical-align: middle;
      border-bottom: 1px solid var(--medium-gray);
    }
    
    /* Quantity Controls */
    .quantity-control {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      left: -30px;
    }
    
    .quantity-control button {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--primary-orange);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      color: white;
      font-size: 14px;
      margin: 0 5px;
    }
    
    .quantity-control button:hover {
      background: var(--dark-orange);
      transform: scale(1.1);
    }
    
    /* Checkout Button */
.checkout-btn {
  border: 2px solid var(--primary-blue) !important;
  color: var(--light-gray) !important;
  font-weight: 600;
  letter-spacing: 0.5px;
  transition: all 0.3s ease;
  padding: 12px 30px !important;
  border-radius: 50px !important;
  text-transform: uppercase;
  font-size: 0.9rem;
  width: 100%;
  margin-top: 20px;
  position: relative;
  overflow: hidden;
    background: var(--trust-gradient) !important;

}

.checkout-btn::before {
  content: "";
  position: absolute;
  top: 0;
  left: -75%;
  width: 50%;
  height: 100%;

  transform: skewX(-20deg);
  transition: all 0.5s ease;
}

.checkout-btn:hover::before {
  left: 125%;
}


.checkout-btn:hover {
  background: var(--trust-gradient) !important;
  color: white !important;
  border-color: transparent !important;
  transform: translateY(-3px);
  box-shadow: 0 10px 20px rgba(31, 117, 254, 0.3);
}
.back-home-btn {
  background: white;
  border: 2px solid var(--primary-orange) !important;
  color: var(--primary-orange) !important;
  font-weight: 600;
  letter-spacing: 0.5px;
  transition: all 0.3s ease;
  padding: 12px 30px !important;
  border-radius: 50px !important;
  text-transform: uppercase;
  font-size: 0.9rem;
  overflow: hidden;
  margin-top: 10px;
  
  /* New positioning */
  position: absolute;
  top: 0;
  right: 30px;
  z-index: 1;
}

/* Shine effect */
.back-home-btn::before {
  content: "";
  position: absolute;
  top: 0;
  left: -78%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    120deg,
    transparent,
    rgba(255, 255, 255, 0.4),
    transparent
  );
  transform: skewX(-20deg);
  transition: all 0.5s ease;
}

.back-home-btn:hover::before {
  left: 125%;
}

.back-home-btn:hover {
  background: var(--spice-gradient) !important;
  color: white !important;
  border-color: transparent !important;
  transform: translateY(-3px);
  box-shadow: 0 10px 20px rgba(255, 107, 0, 0.3);
}

/* Trust Message */
.payment-trust {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.85rem;
  color: #075e1b;
  font-weight: 800;
  margin-top: 10px;
  justify-content: center;
}

.tick-icon {
  flex-shrink: 0;
}

    /* Validation Styles */
    .is-invalid {
      border-color: #dc3545 !important;
    }
    
    .invalid-feedback {
      color: #dc3545;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    
    /* Layout Adjustments */
    .checkout-form-section {
      padding-right: 40px;
      height: calc(100vh - 200px);
      overflow-y: auto;
    }
    
    
    .cart-summary-container {
      position: sticky;
      top: 20px;
      height: fit-content;
    }
    
    /* Responsive Styles */
    @media (max-width: 991.98px) {
      .checkout-form-section {
        height: auto;
        overflow: visible;
        padding-right: 15px;
      }
      
      .cart-summary-container {
        position: static;
      }
    }
    
    @media (max-width: 767.98px) {
      .checkout-container {
        padding: 15px;
      }
      
      table.table thead {
        display: none;
      }
      
      table.table tr {
        display: block;
        margin-bottom: 15px;
        border: 1px solid var(--medium-gray);
        border-radius: 10px;
      }
      
      table.table td {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      table.table td:before {
        content: attr(data-label);
        font-weight: bold;
        margin-right: 15px;
        color: var(--dark-gray);
        flex: 1;
      }
    }
    input{
      border: solid 1px rgb(255, 116, 9) !important;
    }
    th.qty {
  padding-left: 20px !important;
  text-align: left !important;
}

td.qty {
  padding-left: 20px !important;
  text-align: left !important;
}

   
  </style>
  
<style>
  /* Checkbox styling */
.terms-checkbox-container {
  margin: 20px 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

.terms-checkbox {
  width: 20px;
  height: 20px;
  cursor: pointer;
  accent-color: var(--primary-orange);
}

.terms-label {
  font-size: 1rem;
  color: var(--dark-gray);
}

.terms-link {
  color: var(--primary-orange);
  text-decoration: underline;
  cursor: pointer;
  transition: color 0.3s ease;
}

.terms-link:hover {
  color: var(--dark-orange);
}

/* Modal styling */
.terms-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  align-items: center;
  justify-content: center;
}

.terms-modal-content {
  background: #fff;
  max-width: 600px;
  width: 90%;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  max-height: 80vh;
  overflow-y: auto;
}

.terms-modal-content h2 {
  font-size: 1.8rem;
  color: var(--primary-orange);
  font-weight: bold;
  margin-bottom: 15px;
  background: var(--spice-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.terms-modal-content p, .terms-modal-content li {
  font-size: 0.9rem;
  color: var(--dark-gray);
  margin-bottom: 10px;
}

.terms-modal-content ul {
  padding-left: 20px;
}

.close-modal {
  background: var(--spice-gradient);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 25px;
  font-weight: 600;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.3s ease;
}

.close-modal:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(255, 107, 0, 0.3);
}
  /* Add these styles to your existing style section */
  .payment-processing-animation {
    width: 150px;
    height: 100px;
    position: relative;
  }
  
  .cart-container {
    width: 100%;
    height: 100%;
    position: relative;
    animation: moveCart 2s infinite alternate ease-in-out;
  }
  
  .cart {
    width: 80px;
    height: 50px;
    background-color: var(--primary-orange);
    border-radius: 10px 10px 0 0;
    position: absolute;
    bottom: 20px;
    left: 35px;
    transform-origin: bottom;
    animation: bounceCart 0.5s infinite alternate;
  }
  
  .cart-body {
    width: 70px;
    height: 30px;
    background-color: rgba(255,255,255,0.2);
    border-radius: 5px;
    position: absolute;
    top: 10px;
    left: 5px;
  }
  
  .cart-wheels {
    position: absolute;
    bottom: -10px;
    width: 100%;
    display: flex;
    justify-content: space-between;
  }
  
  .wheel {
    width: 15px;
    height: 15px;
    background-color: var(--dark-gray);
    border-radius: 50%;
    position: relative;
  }
  
  .wheel:before {
    content: "";
    position: absolute;
    width: 5px;
    height: 5px;
    background-color: white;
    border-radius: 50%;
    top: 5px;
    left: 5px;
  }
  
  .road {
    width: 100%;
    height: 3px;
    background-color: var(--dark-gray);
    position: absolute;
    bottom: 10px;
    animation: roadMovement 2s infinite linear;
  }
  
  @keyframes moveCart {
    0% { transform: translateX(0); }
    100% { transform: translateX(20px); }
  }
  
  @keyframes bounceCart {
    0% { transform: translateY(0); }
    100% { transform: translateY(-5px); }
  }
  
  @keyframes roadMovement {
    0% { background-position: 0 0; }
    100% { background-position: 40px 0; }
  }
  
  .progress-bar {
    background-color: var(--primary-orange);
  }
</style>
<style>
  /* Add these styles to your existing style section */
  .lottie-animation-container {
    width: 300px;
    height: 300px;
    margin: 0 auto;
  }
  
  #spinner {
    transition: all 0.3s ease;
    backdrop-filter: blur(3px);
  }
  
  #spinner.show {
    opacity: 1;
    visibility: visible;
  }
  
  #spinner:not(.show) {
    opacity: 0;
    visibility: hidden;
  }
  
  .trust-badges img {
    filter: grayscale(100%);
    opacity: 0.7;
    transition: all 0.3s ease;
  }
  
  .trust-badges img:hover {
    filter: grayscale(0%);
    opacity: 1;
  }
</style>

</head>

  
<body>
  <!-- Spinner -->
<!-- Replace the existing spinner div with this enhanced version -->
<div id="spinner" class="show w-100 vh-100 bg-white position-fixed translate-middle top-50 start-50 d-flex align-items-center justify-content-center flex-column" style="z-index: 9999; background-color: rgba(255, 255, 255, 0.9);">
  <div class="lottie-animation-container">
    <dotlottie-player 
      src="https://lottie.host/02a8f2c8-db67-48c9-8cac-3de3aac96805/V88PD1NVqY.lottie" 
      background="transparent" 
      speed="1" 
      style="width: 300px; height: 300px" 
      loop 
      autoplay>
    </dotlottie-player>
  </div>
  <h3 class="text-primary mt-3" style="color: var(--primary-orange); font-weight: 600;">Processing Your Payment</h3>
  <p class="text-muted" style="color: var(--dark-gray); max-width: 300px; text-align: center;">
    Securing your transaction with 128-bit encryption
  </p>
  <div class="trust-badges mt-3 d-flex gap-3">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Visa_Inc._logo.svg/1200px-Visa_Inc._logo.svg.png" alt="Visa" style="height: 20px;">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/1200px-Mastercard-logo.svg.png" alt="Mastercard" style="height: 20px;">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Razorpay_logo.svg/1200px-Razorpay_logo.svg.png" alt="Razorpay" style="height: 20px;">
  </div>
</div>

<!-- Add this script to your head section -->
<script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>


  <!-- Checkout Page Content -->
    <!-- Checkout Page Content -->
  <div class="container-fluid py-5">
    <div class="container py-5 checkout-container">
      <!-- Payment Processing Spinner -->
      <div id="spinner" class="payment-processing-animation" style="display: none;">
        <div class="cart-container">
          <div class="cart">
            <div class="cart-body"></div>
            <div class="cart-wheels">
              <div class="wheel"></div>
              <div class="wheel"></div>
            </div>
          </div>
          <div class="road"></div>
        </div>
      </div>
      <!-- Page Title and Navigation -->
      <h1 class="mb-4">Billing Details</h1>
      <a href="index.html" class="back-home-btn text-decoration-none text-center">Home</a>
      <!-- Checkout Form -->
      <form id="billing-form">
        <div class="row g-5">
          <!-- Billing Details Form -->
          <div class="col-md-12 col-lg-6 checkout-form-section">
            <div class="row">
              <div class="col-md-12 col-lg-6">
                <div class="form-item w-100">
                  <label class="form-label my-3">First Name<sup>*</sup></label>
                  <input type="text" class="form-control" name="first-name" required>
                  <div class="invalid-feedback">Please enter your first name</div>
                </div>
              </div>
              <div class="col-md-12 col-lg-6">
                <div class="form-item w-100">
                  <label class="form-label my-3">Last Name<sup>*</sup></label>
                  <input type="text" class="form-control" name="last-name" required>
                  <div class="invalid-feedback">Please enter your last name</div>
                </div>
              </div>
            </div>
            <div class="form-item">
              <label class="form-label my-3">Address<sup>*</sup></label>
              <input type="text" class="form-control" name="address" placeholder="House Number Street Name" required>
              <div class="invalid-feedback">Please enter your address</div>
            </div>
            <div class="form-item">
              <label class="form-label my-3">State<sup>*</sup></label>
              <input type="text" class="form-control" name="state" required>
              <div class="invalid-feedback">Please enter your state</div>
            </div>
            <div class="form-item">
              <label class="form-label my-3">Town/City<sup>*</sup></label>
              <input type="text" class="form-control" name="town-city" placeholder="Town/City" required>
              <div class="invalid-feedback">Please enter your city</div>
            </div>
            <div class="form-item">
              <label class="form-label my-3">Postcode/Zip<sup>*</sup></label>
              <input type="text" class="form-control" name="postcode" required>
              <div class="invalid-feedback">Please enter your postcode</div>
            </div>
            <div class="form-item">
              <label class="form-label my-3">Mobile<sup>*</sup></label>
              <input type="tel" class="form-control" name="phone-no" required pattern="[0-9]{10}" maxlength="10">
              <div class="invalid-feedback">Please enter a valid 10-digit phone number</div>
            </div>
            <div class="form-item">
              <label class="form-label my-3">Email Address<sup>*</sup></label>
              <input type="email" class="form-control" name="email-id" required>
              <div class="invalid-feedback">Please enter a valid email address</div>
            </div>
            <div class="form-item">
              <label class="form-label my-3">Message</label>
              <textarea name="text" class="form-control" spellcheck="false" cols="30" rows="5" placeholder="Order Notes (Optional)"></textarea>
            </div>
          </div>
          <!-- Order Summary Section -->
          <div class="col-md-12 col-lg-6">
            <div class="cart-summary-container">
              <div class="cart-summary">
                <h3>Order Summary</h3>
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr>
                        <th data-label="Product">Product</th>
                        <th data-label="Weight">Weight</th>
                        <th data-label="Qty" class="qty">Qty</th>
                        <th data-label="Price">Price</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="cart-items">
                      <!-- Cart items will be inserted here -->
                    </tbody>
                    <tfoot>
                      <tr>
                        <td colspan="4" class="text-end text-dark">Subtotal:</td>
                        <td class="subtotal text-dark">₹0.00</td>
                      </tr>
                      <tr>
                        <td colspan="4" class="text-end text-dark">Shipping:</td>
                        <td class="shipping text-dark">₹0.00</td>
                      </tr>
                      <tr>
                        <td colspan="4" class="text-end fw-bold text-dark">Total:</td>
                        <td class="Total fw-bold text-dark">₹0.00</td>
                      </tr>
                    </tfoot>
                  </table>
                </div>
                <!-- Terms and Conditions Checkbox -->
                <div class="terms-checkbox-container">
                  <input type="checkbox" id="terms-checkbox" class="terms-checkbox" required>
                  <label for="terms-checkbox" class="terms-label">
                    I agree to the <a href="#" class="terms-link" id="terms-link">Terms and Conditions</a>
                  </label>
                </div>
                <!-- Checkout Button and Trust Message -->
                <button id="rzp-button" class="checkout-btn" disabled>Proceed to Pay</button>
                <span class="payment-trust">
                  <svg class="tick-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#28a745" viewBox="0 0 16 16">
                    <path d="M13.485 1.929a.75.75 0 0 1 1.06 1.06l-8 8a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06L6 8.439l7.485-7.51z"/>
                  </svg>
                  Your payment is safe & secure
                </span>
              </div>
            </div>
          </div>
        </div>
      </form>
      <!-- Terms and Conditions Modal -->
      <div class="terms-modal" id="terms-modal">
        <div class="terms-modal-content">
          <h2>Terms and Conditions</h2>
          <p>Welcome to AromaHut. By placing an order, you agree to the following terms and conditions:</p>
          <ul>
            <li><strong>No Refund Policy:</strong> All sales are final. We do not offer refunds or exchanges unless the product is defective or damaged upon receipt. Please contact us within 48 hours of delivery for any issues.</li>
            <li><strong>No Order Cancellation:</strong> Once an order is placed and payment is confirmed, it cannot be canceled or modified.</li>
            <li><strong>Delivery Time:</strong> Delivery of products typically takes 3-4 business days, depending on the shipping method and location. Delays may occur due to unforeseen circumstances.</li>
            <li><strong>Contact Information:</strong> For any inquiries, please reach out to us at:
              <ul>
                <li>Email: sales@spiceworld.com</li>
                <li>Phone: +91-98765-43210</li>
              </ul>
            </li>
            <li><strong>Privacy Policy:</strong> We collect personal information (name, address, phone, email) solely for processing and shipping your order. We do not sell or share your personal data with third parties, except as required for order fulfillment or legal compliance.</li>
            <li><strong>Certifications:</strong> AromaHut operates with a valid FSSAI license and GST registration (GSTIN: 33ABCDE1234F125).</li>
            <li><strong>Product Quality:</strong> All our products are homemade and prepared in a hygienic environment to ensure the highest quality and safety standards.</li>
            <li><strong>Company Address:</strong> Spice World Enterprises, No. 45, Spice Lane, Salem - 636007, Tamil Nadu, India.</li>
            <li><strong>Pricing:</strong> Product prices include packaging charges, GST, and shipping costs, which are added directly to the product rate as displayed in the order summary.</li>
            <li><strong>Intellectual Property:</strong> All content on our website, including logos, images, and product descriptions, is the property of AromaHut and may not be reproduced without permission.</li>
            <li><strong>Limitation of Liability:</strong> AromaHut is not liable for any indirect, incidental, or consequential damages arising from the use of our products or services, except as required by law.</li>
            <li><strong>Product Availability:</strong> All products are subject to availability. We reserve the right to modify or discontinue products without prior notice.</li>
            <li><strong>User Responsibilities:</strong> You are responsible for providing accurate billing and shipping information. AromaHut is not liable for delays or non-delivery due to incorrect information.</li>
            <li><strong>Governing Law:</strong> These terms are governed by the laws of India. Any disputes will be resolved in the courts of Salem, Tamil Nadu.</li>
            <li><strong>Changes to Terms:</strong> AromaHut reserves the right to update these terms at any time. Continued use of our services constitutes acceptance of the updated terms.</li>
          </ul>
          <button class="close-modal" id="close-modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Libraries -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/waypoints/waypoints.min.js"></script>
  <script src="lib/lightbox/js/lightbox.min.js"></script>
  <script src="lib/owlcarousel/owl.carousel.min.js"></script>

  <!-- Template Javascript -->
  <script src="js/main.js"></script>

<script>
    const API_BASE_URL = "https://aromahut-1.onrender.com"; // Update this to your actual API base URL

    // State and city data
    const stateCityData = {
"Tamil Nadu": ["Aruppukkottai","Bhavani","Chengalpattu","Chennai","Chidambaram","Coimbatore","Cuddalore","Dharapuram","Dharmapuri","Dindigul","Erode","Gobichettipalayam","Gudalur","Gudiyatham","Hosur","Jayankondam","Kancheepuram","Karaikudi","Karur","Kumbakonam","Madurai","Manapparai","Nagapattinam","Namakkal","Nagercoil","Nanguneri","Neyveli","Ooty","Palani","Paramakudi","Pattukkottai","Perambalur","Pollachi","Pudukkottai","Rajapalayam","Ramanathapuram","Ranipet","Rasipuram","Sankagiri","Sathyamangalam","Sivagangai","Sivakasi","Salem","Sirkali","Tambaram","Tenkasi","Thanjavur","Theni","Thirumangalam","Thiruvannamalai","Thiruvarur","Thoothukudi","Tindivanam","Tiruchendur","Tiruchirappalli","Tiruppur","Tirunelveli","Tiruvallur","Tiruvannamalai","Tiruvethipuram","Udhagamandalam","Udumalaipettai","Vaniyambadi","Vellore","Velur","Villupuram","Virudhunagar","Alandur","Ambattur","Ammainaickanur","Ariyalur","Avadi","Avinashi","Chettithangal","Devakottai","Elayirampannai","Gobichettipalayam","Ilayangudi","Kadayanallur","Kalavai","Kambam","Kangeyam","Kannivadi","Karaikal","Kilakarai","Kodumudi","Kollankodu","Kotagiri","Kovilpatti","Kundrathur","Lalgudi","Manamadurai","Manapparai","Marakkanam","Mayiladuthurai","Melur","Mettupalayam","Mettur","Nagari","Nambiyur","Nandivaram-Guduvancheri","Nangavaram","Nanguneri","Nellikuppam","Neyveli","Omalur","Padmanabhapuram","Palavakkam","Panruti","Papanasam","Pattiveeranpatti","Pennagaram","Periyakulam","Periyasemur","Pollachi","Ponneri","Poonamallee","Pudupattinam","Rajapalayam","Ramanathapuram","Rameswaram","Rasipuram","Sankarankoil","Sathyamangalam","Shenkottai","Sirkali","Sivagiri","Sivakasi","Sriperumbudur","Srirangam","Srivilliputhur","Surandai","Suriyampalayam","Tenkasi","Thammampatti","Tharamangalam","Theni","Thirumangalam","Thiruthuraipoondi","Thiruvarur","Thuraiyur","Thuvakudi","Tindivanam","Tiruchendur","Tiruchengode","Tirupathur","Tiruppattur","Tiruvannamalai","Tittakudi","Udhagamandalam","Udumalaipettai","Unnamalaikadai","Usilampatti","Uthamapalayam","Uthangarai","Vadakkuvalliyur","Valparai","Vaniyambadi","Vedaranyam","Vellakoil","Vellakovil","Vellore","Viluppuram","Virudhachalam","Virudhunagar","Walajapet"],
 "Karnataka": ["Bangalore", "Mysore", "Hubli", "Mangalore", "Belgaum", "Gulbarga", "Davanagere", "Shimoga", "Bellary", "Tumkur"],
        "Other": ["Mumbai", "Delhi", "Hyderabad", "Ahmedabad", "Kolkata", "Pune", "Jaipur", "Lucknow", "Kanpur", "Nagpur"]
    };

  const shippingRates = {
    "Tamil Nadu": {
        baseRate: 40,      // ₹40 for 1.1kg
        increment: 40,    // +₹40 for each additional 1kg (2.1kg, 3.1kg, etc.)
    },
    "Karnataka": {
        baseRate: 50,      // ₹50 for 1.1kg
        increment: 50,     // +₹50 for each additional 1kg
    },
    "Other": {
        baseRate: 80,      // ₹80 for 1.1kg
        increment: 80,     // +₹80 for each additional 1kg
    }
};

    $(document).ready(function () {
        initFormValidation();
        populateStateDropdown();
        updateCartItems();
        updateSubtotal();
        updateTotal();
    });

    function initFormValidation() {
        const $billingForm = $('#billing-form');
        if (!$billingForm.length) {
            console.error('Billing form (#billing-form) not found');
            return;
        }

        $billingForm.on('submit', function (e) {
            e.preventDefault();
            if (validateForm()) {
                processPayment();
            }
        });

        $('input[required]').on('blur', function () {
            validateField($(this));
        });
    }

    function populateStateDropdown() {
        const $stateInput = $('input[name="state"]');
        if (!$stateInput.length) {
            console.error('State input field not found');
            return;
        }

        // Replace the input with a select dropdown
        $stateInput.replaceWith(`
            <select class="form-control" name="state" required>
                <option value="" class="text-dark"  selected >Select State</option>
                <option value="Tamil Nadu" class="text-dark">Tamil Nadu</option>
                <option value="Karnataka">Karnataka</option>
                <option value="Other">Other States</option>
            </select>
        `);

        // Add change event listener for state dropdown
        $('select[name="state"]').on('change', function() {
            const selectedState = $(this).val();
            populateCityDropdown(selectedState);
            updateShippingFee();
            updateTotal();
        });

        // Replace city input with dropdown (initially disabled)
        $('input[name="town-city"]').replaceWith(`
            <select class="form-control" name="town-city" required disabled>
                <option value="" selected text-dark>Select City</option>
                <input type="text" id="custom-city-input" name="custom-city" placeholder="Enter your city" style="display:none; margin-top:10px;" />

            </select>
        `);
    }

function populateCityDropdown(state) {
    const $cityDropdown = $('select[name="town-city"]');
    const $cityInput = $('#custom-city-input'); // Hidden input box for typing custom city
    const cities = stateCityData[state] || [];

    $cityDropdown.empty().append('<option value="" selected disabled>Select City</option>');

    cities.forEach(city => {
        $cityDropdown.append(`<option value="${city}">${city}</option>`);
    });

    // Add "Other" option
    $cityDropdown.append('<option value="other">Other (Type your city)</option>');

    $cityDropdown.prop('disabled', false);

    // Handle the "Other" selection
    $cityDropdown.off('change').on('change', function () {
        if ($(this).val() === 'other') {
            $cityInput.show().prop('required', true);
        } else {
            $cityInput.hide().prop('required', false);
        }
    });
}


    function validateField($field) {
        const value = $field.val().trim();
        const $feedback = $field.next('.invalid-feedback');
        if (!$feedback.length) {
            console.warn(`Invalid feedback element not found for field: ${$field.attr('name')}`);
        }

        if (!value) {
            $field.addClass('is-invalid').attr('aria-invalid', 'true');
            $feedback.text('This field is required');
            return false;
        }

        if ($field.attr('type') === 'email' && !isValidEmail(value)) {
            $field.addClass('is-invalid').attr('aria-invalid', 'true');
            $feedback.text('Please enter a valid email address');
            return false;
        }

        if ($field.attr('name') === 'phone-no' && !isValidPhone(value)) {
            $field.addClass('is-invalid').attr('aria-invalid', 'true');
            $feedback.text('Please enter a valid 10-digit phone number');
            return false;
        }

        $field.removeClass('is-invalid').attr('aria-invalid', 'false');
        $feedback.text('');
        return true;
    }

    function validateForm() {
        let isValid = true;
        let $firstInvalidField = null;

        $('input[required], select[required]').each(function () {
            if (!validateField($(this))) {
                isValid = false;
                if (!$firstInvalidField) $firstInvalidField = $(this);
            }
        });

        if (!isValid && $firstInvalidField) {
            $('html, body').animate({
                scrollTop: $firstInvalidField.offset().top - 100
            }, 500);
            setTimeout(() => $firstInvalidField.focus(), 500);
        }

        return isValid;
    }

    function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function isValidPhone(phone) {
        return /^\d{10}$/.test(phone);
    }

    function updateCartItems() {
        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        const $cartContainer = $('#cart-items');

        if (!$cartContainer.length) {
            console.error('Cart container (#cart-items) not found');
            return;
        }

        $cartContainer.empty();

        if (cartItems.length === 0) {
            $cartContainer.append('<tr><td colspan="5" class="text-center py-4">Your cart is empty</td></tr>');
            $('#rzp-button').prop('disabled', true).addClass('disabled').attr('aria-disabled', 'true');
            return;
        }

        cartItems.forEach((item, index) => {
            if (!item.name || !item.weight || isNaN(item.price) || !item.id) {
                console.warn(`Invalid cart item at index ${index}:`, item);
                return;
            }

            item.pricePerUnit = parseFloat(item.price) || 0;
            const quantity = item.quantity || 1;
            const itemRow = $(`
                <tr>
                    <td data-label="Product" class="text-dark">${item.name}</td>
                    <td data-label="Weight" class="text-dark">${item.weight}</td>
                    <td data-label="Qty">
                        <div class="quantity-control">
                            <button type="button" onclick="changeQuantity(${index}, -1)" aria-label="Decrease quantity">-</button>
                            <span class="text-dark" id="quantity-${index}">${quantity}</span>
                            <button type="button" onclick="changeQuantity(${index}, 1)" aria-label="Increase quantity">+</button>
                        </div>
                    </td>
                    <td data-label="Price" class="text-dark" id="price-${index}">₹${(item.pricePerUnit * quantity).toFixed(2)}</td>
                    <td>
                        <i class="fas fa-trash-alt remove-btn text-danger" 
                           data-index="${index}" 
                           role="button" 
                           tabindex="0" 
                           aria-label="Remove ${item.name}" 
                           style="cursor:pointer">
                        </i>
                    </td>
                </tr>
            `);
            $cartContainer.append(itemRow);
        });

        $cartContainer.off('click keydown', '.fa-trash-alt').on('click keydown', '.fa-trash-alt', function (e) {
            if (e.type === 'keydown' && e.key !== 'Enter' && e.key !== ' ') return;
            if (e.type === 'keydown') e.preventDefault();

            const index = $(this).data('index');
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItems.splice(index, 1);
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            updateCartItems();
            updateSubtotal();
            updateTotal();
            updateCartCount();
        });
    }

    function updateSubtotal() {
        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        let subtotal = 0;

        cartItems.forEach(item => {
            const price = parseFloat(item.price) || 0;
            const quantity = item.quantity || 1;
            subtotal += price * quantity;
        });

        const $subtotal = $('.subtotal');
        if ($subtotal.length) {
            $subtotal.text(`₹${subtotal.toFixed(2)}`);
        } else {
            console.warn('Subtotal element (.subtotal) not found');
        }

        return subtotal;
    }

  function updateShippingFee() {
    const selectedState = $('select[name="state"]').val();
    const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
    
    if (!selectedState || cartItems.length === 0) {
        $('.shipping').text('₹0.00');
        return 0;
    }

    // Calculate total weight (assuming each item is 1.1kg)
    const totalWeight = cartItems.reduce((total, item) => {
        return total + (item.quantity || 1);
    }, 0) * 1.1; // Total weight in kg (e.g., 2 items = 2.2kg)

    const stateRates = shippingRates[selectedState] || shippingRates["Other"];
    
    // Calculate shipping fee based on weight thresholds (1.1kg, 2.1kg, 3.1kg...)
    let shippingFee = 0;
    if (totalWeight > 0) {
        if (totalWeight <= 1.1) {
            shippingFee = stateRates.baseRate; // 1.1kg or less
        } else {
            // For weights > 1.1kg, calculate how many full 1kg increments apply
            const extraWeight = totalWeight - 1.1;
            const increments = Math.floor(extraWeight) + 1; // Round down and add 1 for the next tier
            shippingFee = stateRates.baseRate + (stateRates.increment * increments);
        }
    }

    const $shipping = $('.shipping');
    if ($shipping.length) {
        $shipping.text(`₹${shippingFee.toFixed(2)}`);
    } else {
        console.warn('Shipping element (.shipping) not found');
    }

    localStorage.setItem('shippingFee', shippingFee.toFixed(2));
    return shippingFee;
}

    function updateTotal() {
        const subtotal = parseFloat(updateSubtotal()) || 0;
        const shippingFee = parseFloat(updateShippingFee()) || 0;
        const gstRate = 0.05; // 5% GST
        const gstAmount = (subtotal + shippingFee) * gstRate;
        const totalAmount = subtotal + shippingFee + gstAmount;

        localStorage.setItem('total', totalAmount.toFixed(2));

        const $total = $('.Total');
        const $shipping = $('.shipping');
        const $gst = $('.gst');
        
        if ($total.length) {
            $total.text(`₹${totalAmount.toFixed(2)}`);
        } else {
            console.warn('Total element (.Total) not found');
        }
        
        if ($shipping.length) {
            $shipping.text(`₹${shippingFee.toFixed(2)}`);
        } else {
            console.warn('Shipping element (.shipping) not found');
        }
        
        // Add GST row if it doesn't exist
        if (!$gst.length) {
            $('.shipping').closest('tr').after(`
                <tr>
                    <td colspan="4" class="text-end text-dark">GST (5%):</td>
                    <td class="gst text-dark">₹${gstAmount.toFixed(2)}</td>
                </tr>
            `);
        } else {
            $gst.text(`₹${gstAmount.toFixed(2)}`);
        }

        const $checkoutButton = $('#rzp-button');
        if ($checkoutButton.length) {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            if (cartItems.length === 0 || totalAmount <= 0) {
                $checkoutButton.prop('disabled', true).addClass('disabled').attr('aria-disabled', 'true');
            } else {
                $checkoutButton.prop('disabled', !$('#terms-checkbox').is(':checked')).removeClass('disabled').attr('aria-disabled', 'false');
            }
        } else {
            console.warn('Checkout button (#rzp-button) not found');
        }

        return totalAmount;
    }

    window.changeQuantity = function (index, change) {
        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        if (!cartItems[index]) {
            console.error(`Invalid cart item index: ${index}`);
            return;
        }

        const newQty = (cartItems[index].quantity || 1) + change;
        cartItems[index].quantity = newQty < 1 ? 1 : Math.min(newQty, 100);
        localStorage.setItem('cartItems', JSON.stringify(cartItems));

        $(`#quantity-${index}`).text(cartItems[index].quantity);

        const pricePerUnit = parseFloat(cartItems[index].price) || 0;
        const newPrice = pricePerUnit * cartItems[index].quantity;
        $(`#price-${index}`).text(`₹${newPrice.toFixed(2)}`);

        updateSubtotal();
        updateTotal();
        updateCartCount();
    };

    function updateCartCount() {
        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        const totalItems = cartItems.reduce((total, item) => total + (item.quantity || 0), 0);
        const $cartCountElements = $('.cart-count');

        if (!$cartCountElements.length) {
            console.warn('No .cart-count elements found');
            return;
        }

        $cartCountElements.each(function () {
            $(this).text(totalItems);
            if (typeof window.animate__animated !== 'undefined') {
                $(this).addClass('animate__animated animate__bounceIn');
                setTimeout(() => $(this).removeClass('animate__animated animate__bounceIn'), 1000);
            }
        });
    }

    // Function to check if Razorpay SDK is loaded
    function waitForRazorpay(maxAttempts = 10, interval = 500) {
        return new Promise((resolve, reject) => {
            let attempts = 0;
            const checkInterval = setInterval(() => {
                attempts++;
                console.log(`Checking for Razorpay SDK (attempt ${attempts})...`);
                if (window.Razorpay) {
                    clearInterval(checkInterval);
                    console.log('Razorpay SDK loaded successfully');
                    resolve();
                } else if (attempts >= maxAttempts) {
                    clearInterval(checkInterval);
                    console.error('Razorpay SDK failed to load after maximum attempts');
                    reject(new Error('Razorpay SDK not loaded'));
                }
            }, interval);
        });
    }

    async function processPayment() {
        const $spinner = $('#spinner');
        if ($spinner.length) {
            $spinner.addClass('show');
        }

        const $firstName = $('input[name="first-name"]');
        const $lastName = $('input[name="last-name"]');
        const $email = $('input[name="email-id"]');
        const $phone = $('input[name="phone-no"]');
        const $address = $('input[name="address"]');
        const $city = $('select[name="town-city"]');
        const $postalCode = $('input[name="postcode"]');
        const $state = $('select[name="state"]');

        if (!($firstName.length && $lastName.length && $email.length && $phone.length && 
              $address.length && $city.length && $postalCode.length && $state.length)) {
            console.error('One or more form fields are missing');
            alert('Please fill out all required fields.');
            if ($spinner.length) $spinner.removeClass('show');
            return;
        }

        const firstName = $firstName.val().trim();
        const lastName = $lastName.val().trim();
        const email = $email.val().trim();
        const phone = $phone.val().trim();
        const address = $address.val().trim();
        const city = $city.val().trim();
        const postalCode = $postalCode.val().trim();
        const state = $state.val().trim();

        if (!city) {
            alert('Please select a city');
            if ($spinner.length) $spinner.removeClass('show');
            return;
        }

        const fullAddress = `${address}, ${city}, ${postalCode}, ${state}`;
        const totalAmount = parseFloat(localStorage.getItem('total')) || 0;
        const amountInPaise = Math.round(totalAmount * 100);

        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

        if (cartItems.length === 0) {
            alert('Your cart is empty. Please add items to your cart and try again.');
            if ($spinner.length) $spinner.removeClass('show');
            return;
        }

        if (totalAmount <= 0) {
            alert('The total amount is invalid. Please ensure your cart has items and try again.');
            if ($spinner.length) $spinner.removeClass('show');
            return;
        }

        if (amountInPaise < 100) {
            alert('The total amount must be at least ₹1. Please add more items to your cart.');
            if ($spinner.length) $spinner.removeClass('show');
            return;
        }

        const orderData = {
            amount: amountInPaise,
            currency: 'INR',
            buyerName: `${firstName} ${lastName}`,
            buyerEmail: email,
            buyerPhone: phone,
            buyerAddress: fullAddress,
            items: cartItems.map(item => ({
                name: item.name,
                weight: item.weight,
                quantity: item.quantity || 1,
                price: parseFloat(item.price)
            })),
            shippingFee: parseFloat(localStorage.getItem('shippingFee')) || 0,
            gst: (totalAmount - (parseFloat(localStorage.getItem('shippingFee')) || 0) * 0.05
        )};

        try {
            // Wait for Razorpay SDK to load
            console.log('Waiting for Razorpay SDK to load...');
            await waitForRazorpay();

            console.log('Making API call to create order...');
            const response = await fetch(`${API_BASE_URL}/create-order`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ amount: amountInPaise, items: orderData.items })
            });

            if (!response.ok) {
                const err = await response.json();
                throw new Error(err.error || 'Failed to create order');
            }

            const order = await response.json();

            const options = {
                key: 'rzp_live_adGv4HqiAU33pO',
                amount: order.amount,
                currency: 'INR',
                name: 'Aromahut',
                description: 'Order Payment',
                image: 'https://via.placeholder.com/150',
                order_id: order.id,
                handler: function (response) {
                    handlePaymentSuccess(response, orderData);
                },
                prefill: {
                    name: orderData.buyerName,
                    email: orderData.buyerEmail,
                    contact: orderData.buyerPhone
                },
                notes: {
                    address: orderData.buyerAddress
                },
                theme: { color: '#ff6b00' },
                modal: {
                    ondismiss: function () {
                        if ($spinner.length) $spinner.removeClass('show');
                    }
                }
            };

            console.log('Initializing Razorpay with options:', options);
            const rzp1 = new Razorpay(options);
            rzp1.on('payment.failed', function (response) {
                console.error('Razorpay payment failed:', response.error);
                alert(`Payment failed: ${response.error.description}. Please try again.`);
                if ($spinner.length) $spinner.removeClass('show');
            });
            rzp1.open();

            if ($spinner.length) $spinner.removeClass('show');
        } catch (error) {
            console.error('Error in processPayment:', error.message);
            alert(`Payment failed: ${error.message}. Please try again or contact support.`);
            if ($spinner.length) $spinner.removeClass('show');
        }
    }

    function handlePaymentSuccess(response, orderData) {
        const paymentData = {
            razorpay_order_id: response.razorpay_order_id,
            razorpay_payment_id: response.razorpay_payment_id,
            razorpay_signature: response.razorpay_signature,
            buyerName: orderData.buyerName,
            buyerEmail: orderData.buyerEmail,
            buyerPhone: orderData.buyerPhone,
            buyerAddress: orderData.buyerAddress,
            items: orderData.items,
            shippingFee: orderData.shippingFee,
            gst: orderData.gst
        };

        fetch(`${API_BASE_URL}/verify-payment`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(paymentData)
        })
        .then(res => res.json())
        .then(data => {
            localStorage.removeItem('cartItems');
            localStorage.removeItem('total');
            localStorage.removeItem('shippingFee');
            const redirectUrl = `greetings.html?orderId=${response.razorpay_order_id}&paymentId=${response.razorpay_payment_id}&status=${data.status}`;
            window.location.href = redirectUrl;
        })
        .catch(error => {
            console.error('Error verifying payment:', error);
            alert('There was an error verifying your payment. Please contact support.');
            const redirectUrl = `greetings.html?orderId=${response.razorpay_order_id}&paymentId=${response.razorpay_payment_id}&status=error`;
            window.location.href = redirectUrl;
        });
    }

    $('#rzp-button').on('click', function (e) {
        e.preventDefault();
        if (validateForm()) {
            processPayment();
        }
    });

    // Terms and Conditions Checkbox and Modal
    document.addEventListener('DOMContentLoaded', () => {
        const termsCheckbox = document.getElementById('terms-checkbox');
        const termsLink = document.getElementById('terms-link');
        const termsModal = document.getElementById('terms-modal');
        const closeModal = document.getElementById('close-modal');
        const checkoutBtn = document.getElementById('rzp-button');

        termsCheckbox.addEventListener('change', () => {
            checkoutBtn.disabled = !termsCheckbox.checked;
            updateTotal(); // Update button state based on cart and checkbox
        });

        termsLink.addEventListener('click', (e) => {
            e.preventDefault();
            termsModal.style.display = 'flex';
        });

        closeModal.addEventListener('click', () => {
            termsModal.style.display = 'none';
        });

        termsModal.addEventListener('click', (e) => {
            if (e.target === termsModal) {
                termsModal.style.display = 'none';
            }
        });
    });
</script>


</body>
</html>
